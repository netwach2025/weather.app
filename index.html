<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>NetWatch Pro - Glass & Pixel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">

  <style>
    /* =========================================
       NETWATCH PRO: GLASS + PIXEL ENGINE
       ========================================= */
    :root {
      --bg-deep: #000000;
      --accent: #a5f3fc; /* Cyan-200 (Pixel-like pastel) */
      --text-main: #ffffff;
      --text-muted: rgba(255, 255, 255, 0.6);
      
      /* ULTRA GLASS VARIABLES */
      --glass-surface: rgba(255, 255, 255, 0.03);
      --glass-border: rgba(255, 255, 255, 0.18);
      --glass-highlight: rgba(255, 255, 255, 0.3);
      --glass-blur: blur(50px) saturate(180%);
      --glass-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
      
      --radius-lg: 32px;
      --radius-pill: 999px;
      --sidebar-width: 88px;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0; width: 100vw; height: 100vh;
      background: #000;
      color: var(--text-main);
      font-family: 'Inter', sans-serif;
      overflow: hidden;
    }

    /* ===== DYNAMIC BACKGROUND ===== */
    .app-bg {
      position: fixed; inset: 0; z-index: -2;
      background: radial-gradient(circle at 50% 0%, #1e1b4b, #0f172a, #000);
      transition: background 2s ease;
    }
    .app-noise {
      position: fixed; inset: 0; z-index: -1; opacity: 0.07; pointer-events: none;
      background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIj48ZmlsdGVyIGlkPSJuIj48ZmVUdXJidWxlbmNlIHR5cGU9ImZyYWN0YWxOb2lzZSIgYmFzZUZyZXF1ZW5jeT0iMC44IiBzdGl0Y2hUaWxlcz0ic3RpdGNoIi8+PC9maWx0ZXI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsdGVyPSJ1cmwoI24pIiBvcGFjaXR5PSIwLjUiLz48L3N2Zz4=');
    }

    .app-container { display: flex; height: 100vh; width: 100vw; }

    /* ===== PIXEL-STYLE SIDEBAR ===== */
    .sidebar {
      width: var(--sidebar-width); height: 100%;
      background: rgba(10, 10, 10, 0.4);
      backdrop-filter: blur(40px); -webkit-backdrop-filter: blur(40px);
      border-right: 1px solid var(--glass-border);
      display: flex; flex-direction: column; align-items: center;
      padding: 2.5rem 0; gap: 1.5rem; z-index: 50;
    }

    .nav-logo { font-size: 2rem; color: var(--accent); margin-bottom: 2rem; filter: drop-shadow(0 0 15px rgba(34,211,238,0.6)); }

    .nav-item {
      position: relative; width: 56px; height: 56px;
      border-radius: 20px; display: flex; align-items: center; justify-content: center;
      color: var(--text-muted); font-size: 1.6rem; cursor: pointer;
      border: none; background: transparent; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .nav-item:hover, .nav-item.active {
      color: #fff; background: rgba(255,255,255,0.1);
      box-shadow: 0 0 30px rgba(255, 255, 255, 0.1);
      transform: scale(1.05);
    }
    .nav-item.active i { color: var(--accent); }
    
    .nav-item .tooltip {
      position: absolute; left: 75px; background: rgba(0,0,0,0.8); padding: 6px 12px;
      border-radius: 8px; font-size: 0.85rem; opacity: 0; pointer-events: none;
      border: 1px solid var(--glass-border); transition: 0.2s; white-space: nowrap; font-weight: 500;
    }
    .nav-item:hover .tooltip { opacity: 1; left: 80px; }

    /* ===== MAIN CONTENT ===== */
    .main-content { flex: 1; padding: 2.5rem; overflow-y: auto; position: relative; }

    .view-section { display: none; animation: fadeUp 0.6s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; }
    .view-section.active { display: block; }
    @keyframes fadeUp { from { opacity: 0; transform: translateY(30px) scale(0.98); } to { opacity: 1; transform: translateY(0) scale(1); } }

    /* HEADER */
    .view-header {
      display: flex; justify-content: space-between; align-items: center;
      margin-bottom: 2.5rem;
    }
    .view-title h1 { 
      margin: 0; font-weight: 800; font-size: 3.5rem; letter-spacing: -1.5px;
      background: linear-gradient(180deg, #fff 0%, #cbd5e1 100%);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      filter: drop-shadow(0 2px 10px rgba(0,0,0,0.3));
    }
    .view-title span { color: var(--accent); font-size: 0.85rem; text-transform: uppercase; letter-spacing: 3px; font-weight: 700; margin-bottom: 5px; display: block; }

    .header-right { display: flex; align-items: center; gap: 2rem; }

    /* PIXEL SEARCH BAR */
    .search-box {
      position: relative; display: flex; align-items: center;
      background: rgba(255,255,255,0.08); border: 1px solid var(--glass-border);
      border-radius: var(--radius-pill); padding: 0.75rem 1.5rem;
      transition: all 0.3s ease; box-shadow: inset 0 2px 4px rgba(0,0,0,0.2);
    }
    .search-box:focus-within { 
      background: rgba(255,255,255,0.15); border-color: var(--accent); 
      box-shadow: 0 0 25px rgba(34, 211, 238, 0.2), inset 0 2px 4px rgba(0,0,0,0.2); 
    }
    .search-box input {
      background: transparent; border: none; color: white; outline: none;
      width: 140px; font-size: 1rem; margin-left: 0.75rem; font-weight: 500;
    }
    .search-box i { color: var(--accent); font-size: 1.2rem; }

    .clock-widget { text-align: right; }
    .clock-time { font-size: 2rem; font-weight: 200; line-height: 1; font-variant-numeric: tabular-nums; letter-spacing: -1px; }
    .clock-date { font-size: 0.85rem; color: var(--text-muted); font-weight: 600; text-transform: uppercase; letter-spacing: 1px; margin-top: 4px; }

    /* ===== ULTRA GLASS CARDS ===== */
    .grid-dashboard { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 2rem; }
    
    .glass-card {
      position: relative;
      background: linear-gradient(135deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.01) 100%);
      border: 1px solid var(--glass-border);
      border-top: 1px solid var(--glass-highlight); /* Top highlight */
      border-radius: var(--radius-lg);
      padding: 2rem;
      backdrop-filter: blur(50px) saturate(180%);
      -webkit-backdrop-filter: blur(50px) saturate(180%);
      box-shadow: var(--glass-shadow);
      transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
      overflow: hidden;
    }
    .glass-card:hover { transform: translateY(-8px) scale(1.01); border-color: rgba(255,255,255,0.3); }
    
    /* Internal Shine */
    .glass-card::before {
      content: ''; position: absolute; inset: 0;
      background: linear-gradient(115deg, transparent 30%, rgba(255,255,255,0.05) 45%, transparent 60%);
      pointer-events: none; opacity: 0.5;
    }

    /* HERO CARD SPECIFIC */
    .hero-card {
      grid-column: 1 / -1; min-height: 320px;
      display: flex; align-items: center; justify-content: space-between;
      padding: 2rem 5rem;
      background: linear-gradient(120deg, rgba(255,255,255,0.1), rgba(255,255,255,0.02));
    }

    /* Typography inside cards */
    .metric-label { font-size: 0.85rem; font-weight: 700; letter-spacing: 1.5px; color: var(--text-muted); text-transform: uppercase; margin-bottom: 0.5rem; }
    .metric-val { font-size: 3rem; font-weight: 700; letter-spacing: -1px; }
    .metric-sub { font-size: 0.9rem; color: rgba(255,255,255,0.5); font-weight: 500; margin-top: 0.5rem; }

    /* ===== THE LIVE GLASS ICON ENGINE ===== */
    .weather-icon-stage {
      position: relative; width: 200px; height: 200px;
      /* Border for debugging: border: 1px solid red; */
    }

    /* 1. The Glass Cloud */
    .glass-cloud {
      position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
      width: 140px; height: 70px;
      background: rgba(255, 255, 255, 0.45);
      border-radius: 60px;
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      box-shadow: 
        inset 0 2px 4px rgba(255,255,255,0.8), 
        inset 0 -4px 8px rgba(0,0,0,0.1),
        0 15px 30px rgba(0,0,0,0.2);
      border: 1px solid rgba(255,255,255,0.6);
      z-index: 10;
      animation: float 6s ease-in-out infinite;
    }
    .glass-cloud::after {
      content: ''; position: absolute;
      width: 80px; height: 80px;
      top: -45px; left: 25px;
      background: inherit; border-radius: 50%;
      box-shadow: inherit; backdrop-filter: inherit;
      border-top: 1px solid rgba(255,255,255,0.6);
    }
    .glass-cloud::before {
      content: ''; position: absolute;
      width: 60px; height: 60px;
      top: -25px; left: 70px;
      background: inherit; border-radius: 50%;
      box-shadow: inherit; backdrop-filter: inherit;
    }

    @keyframes float { 0%, 100% { transform: translate(-50%, -50%); } 50% { transform: translate(-50%, -60%); } }

    /* 2. The Sun Glare */
    .sun-glare {
      position: absolute; top: 10px; right: 20px;
      width: 90px; height: 90px;
      background: radial-gradient(circle, #fbbf24 0%, #f59e0b 40%, transparent 80%);
      border-radius: 50%;
      filter: blur(10px);
      opacity: 0; /* Hidden by default */
      z-index: 5;
      animation: pulse-sun 4s ease-in-out infinite;
    }
    @keyframes pulse-sun { 0%, 100% { transform: scale(1); opacity: 0.8; } 50% { transform: scale(1.1); opacity: 1; } }

    /* 3. Lightning Bolts */
    .lightning-bolt {
      position: absolute; top: 60%; left: 50%;
      width: 0; height: 0;
      border-left: 10px solid transparent;
      border-right: 15px solid transparent;
      border-top: 40px solid #fef08a; /* Yellow Bolt */
      transform: translateX(-50%) skew(-20deg);
      filter: drop-shadow(0 0 15px #facc15);
      opacity: 0;
      z-index: 8;
    }
    .bolt-anim { animation: flash 3s infinite; }
    @keyframes flash {
      0%, 90%, 100% { opacity: 0; transform: translateX(-50%) skew(-20deg) scale(0.8); }
      92% { opacity: 1; transform: translateX(-50%) skew(-20deg) scale(1.1); }
      94% { opacity: 0; }
      96% { opacity: 1; }
    }

    /* 4. Rain */
    .rain-drop {
      position: absolute; background: #a5f3fc; width: 3px; height: 15px;
      border-radius: 2px; opacity: 0; top: 60%;
      animation: rain 1s linear infinite;
    }
    @keyframes rain { 0% { opacity: 0; transform: translateY(0); } 20% { opacity: 1; } 100% { opacity: 0; transform: translateY(60px); } }

    /* ===== OCEAN SCENE ===== */
    .ocean-scene {
      width: 100%; height: 400px;
      border-radius: var(--radius-lg); overflow: hidden;
      position: relative;
      background: linear-gradient(to bottom, #0ea5e9 0%, #0369a1 100%);
      box-shadow: inset 0 0 60px rgba(0,0,0,0.4);
      border: 1px solid var(--glass-border);
    }
    .wave {
      position: absolute; bottom: 0; left: 0; width: 200%; height: 120px;
      background: url('data:image/svg+xml;utf8,<svg viewBox="0 0 1200 120" xmlns="http://www.w3.org/2000/svg"><path d="M0 0v120h1200V0c-63.6 0-106.8 35.8-171.4 35.8-60.6 0-102.2-28.4-159.2-28.4-60.4 0-101.4 22.6-157.4 22.6-59.6 0-104.2-34.4-162.2-34.4C497.6-4.4 442.2 33 389 33c-58.4 0-108.6-32.8-164.8-32.8C162.2 0.2 110.8 28.2 55.4 28.2 36.2 28.2 17.6 23.4 0 15.6z" fill="rgba(255,255,255,0.15)"/></svg>');
      background-size: 50% 100%;
      animation: wave-move var(--wave-speed, 5s) linear infinite;
    }
    .wave:nth-child(2) { bottom: 10px; opacity: 0.6; animation-direction: reverse; animation-duration: 7s; }
    @keyframes wave-move { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }

    /* Palm Tree */
    .palm-container {
      position: absolute; bottom: -30px; right: 40px;
      width: 220px; height: 340px;
      transform-origin: bottom center;
      animation: sway var(--sway-speed, 3s) ease-in-out infinite alternate;
      filter: drop-shadow(0 10px 20px rgba(0,0,0,0.5));
    }
    @keyframes sway { from { transform: rotate(-3deg); } to { transform: rotate(3deg); } }

    /* Mobile */
    @media (max-width: 768px) {
      .app-container { flex-direction: column-reverse; }
      .sidebar { width: 100%; height: 80px; flex-direction: row; justify-content: space-around; padding: 0; }
      .nav-logo, .tooltip { display: none; }
      .hero-card { flex-direction: column; text-align: center; gap: 2rem; padding: 2rem; }
      .header-right { gap: 1rem; }
      .search-box input { width: 100px; }
      .clock-time { font-size: 1.5rem; }
    }
  </style>
</head>
<body>

  <div class="app-bg" id="app-bg"></div>
  <div class="app-noise"></div>

  <div class="app-container">
    <nav class="sidebar">
      <div class="nav-logo"><i class="ph-fill ph-planet"></i></div>
      <button class="nav-item active" onclick="switchTab('dashboard', this)">
        <i class="ph-bold ph-squares-four"></i><div class="tooltip">Dashboard</div>
      </button>
      <button class="nav-item" onclick="switchTab('wind', this)">
        <i class="ph-bold ph-wind"></i><div class="tooltip">Ocean</div>
      </button>
      <button class="nav-item" onclick="switchTab('radar', this)">
        <i class="ph-bold ph-radar"></i><div class="tooltip">Radar</div>
      </button>
      <button class="nav-item" onclick="switchTab('astro', this)">
        <i class="ph-bold ph-sun-horizon"></i><div class="tooltip">Astro</div>
      </button>
      <div style="flex:1"></div>
      <button class="nav-item" onclick="switchTab('settings', this)">
        <i class="ph-bold ph-gear"></i><div class="tooltip">Settings</div>
      </button>
    </nav>

    <main class="main-content">
      
      <section id="view-dashboard" class="view-section active">
        <header class="view-header">
          <div class="view-title">
            <span>System Overview</span>
            <h1>Dashboard</h1>
          </div>
          <div class="header-right">
             <div class="search-box">
                <i class="ph-bold ph-magnifying-glass"></i>
                <input type="text" id="zip-search" placeholder="Zip Code..." onkeydown="handleSearch(event)">
             </div>
             <div class="clock-widget">
                <div class="clock-time" id="clock-time">--:--:--</div>
                <div class="clock-date" id="clock-date">--</div>
             </div>
          </div>
        </header>

        <div class="grid-dashboard">
          <div class="glass-card hero-card">
            <div>
              <div style="font-size:1.1rem; opacity:0.8; margin-bottom:0.5rem; display:flex; align-items:center; gap:0.5rem; font-weight: 500;">
                <i class="ph-fill ph-map-pin"></i> <span id="loc-name">Detecting...</span>
              </div>
              <div style="font-size:7rem; font-weight:800; line-height:1; letter-spacing: -4px;" id="val-temp">--°</div>
              <div style="color:var(--accent); margin-top:0.5rem; font-size:1.4rem; font-weight:600;" id="val-cond">--</div>
            </div>
            
            <div class="weather-icon-stage" id="icon-stage">
               <div class="glass-cloud"></div>
               <div class="sun-glare"></div>
               </div>
          </div>

          <div class="glass-card">
            <div class="metric-label">Humidity</div>
            <div class="metric-val" id="val-humid">--%</div>
            <div class="metric-sub">Dew Point: <span id="val-dew">--</span>°</div>
          </div>
          <div class="glass-card">
            <div class="metric-label">Pressure</div>
            <div class="metric-val" id="val-press">--</div>
            <div class="metric-sub" style="font-size:1rem">hPa</div>
          </div>
          <div class="glass-card">
            <div class="metric-label">Visibility</div>
            <div class="metric-val" id="val-vis">--</div>
            <div class="metric-sub" style="font-size:1rem">Miles</div>
          </div>
        </div>
      </section>

      <section id="view-wind" class="view-section">
        <header class="view-header">
          <div class="view-title"><span>Simulation</span><h1>Live Ocean</h1></div>
        </header>
        <div class="ocean-scene" id="ocean-scene">
           <div class="wave"></div><div class="wave"></div>
           <div class="palm-container">
              <svg viewBox="0 0 200 300" fill="none"><path d="M98 300C86 248 84 205 88 160C92 110 110 60 120 0" stroke="rgba(0,0,0,0.4)" stroke-width="10" stroke-linecap="round"/><path d="M118 22C150 30 180 52 196 78" stroke="#0f172a" stroke-width="10" stroke-linecap="round"/><path d="M118 35C145 55 165 78 178 105" stroke="#0f172a" stroke-width="9" stroke-linecap="round"/><path d="M118 22C85 35 55 58 25 86" stroke="#0f172a" stroke-width="10" stroke-linecap="round"/><path d="M118 40C90 60 70 85 52 112" stroke="#0f172a" stroke-width="9" stroke-linecap="round"/></svg>
           </div>
           <div style="position:absolute; bottom:30px; left:30px; z-index:10;">
              <div style="font-size:5rem; font-weight:800; line-height:1" id="wind-big">--</div>
              <div style="font-weight:700; opacity:0.8; letter-spacing:2px">MPH WIND</div>
           </div>
        </div>
      </section>

      <section id="view-radar" class="view-section">
        <header class="view-header"><div class="view-title"><span>Map</span><h1>Live Radar</h1></div></header>
        <div style="width:100%; height:600px; border-radius:32px; overflow:hidden; border:1px solid var(--glass-border);" id="radar-container">
           <div style="height:100%; display:flex; align-items:center; justify-content:center;">Loading Map...</div>
        </div>
      </section>

      <section id="view-astro" class="view-section">
         <header class="view-header"><div class="view-title"><span>Celestial</span><h1>Sun & Moon</h1></div></header>
         <div class="grid-dashboard">
            <div class="glass-card">
               <div class="metric-label">Sunrise</div>
               <div class="metric-val" id="val-rise">--</div>
            </div>
            <div class="glass-card">
               <div class="metric-label">Sunset</div>
               <div class="metric-val" id="val-set">--</div>
            </div>
         </div>
      </section>

    </main>
  </div>

  <script>
    // ===== STATE =====
    let lat = null, lon = null;
    const ui = {
      loc: document.getElementById('loc-name'),
      temp: document.getElementById('val-temp'),
      cond: document.getElementById('val-cond'),
      humid: document.getElementById('val-humid'),
      dew: document.getElementById('val-dew'),
      press: document.getElementById('val-press'),
      vis: document.getElementById('val-vis'),
      windBig: document.getElementById('wind-big'),
      radar: document.getElementById('radar-container'),
      iconStage: document.getElementById('icon-stage'),
      rise: document.getElementById('val-rise'),
      set: document.getElementById('val-set')
    };

    // ===== CLOCK =====
    function updateClock() {
        const now = new Date();
        document.getElementById('clock-time').textContent = now.toLocaleTimeString('en-US', {hour12: false});
        document.getElementById('clock-date').textContent = now.toLocaleDateString('en-US', {weekday:'short', month:'short', day:'numeric'});
    }
    setInterval(updateClock, 1000); updateClock();

    // ===== INIT =====
    function initApp() {
      // 1. Try GPS
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          (pos) => { lat = pos.coords.latitude; lon = pos.coords.longitude; fetchLocationName(lat, lon); },
          () => { console.warn("GPS Denied. IP Fallback."); getLocationByIP(); }
        );
      } else { getLocationByIP(); }
    }

    async function fetchLocationName(lat, lon) {
        try {
            const res = await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${lat}&longitude=${lon}&localityLanguage=en`);
            const data = await res.json();
            ui.loc.textContent = `${data.city}, ${data.principalSubdivisionCode}`;
            fetchWeather();
        } catch(e) { ui.loc.textContent = "Current Location"; fetchWeather(); }
    }

    async function getLocationByIP() {
      try {
        const res = await fetch('https://ipapi.co/json/');
        const data = await res.json();
        lat = data.latitude; lon = data.longitude;
        ui.loc.textContent = `${data.city}, ${data.region_code}`;
        fetchWeather();
      } catch (e) { ui.loc.textContent = "Location Unknown"; }
    }

    async function handleSearch(e) {
        if(e.key === 'Enter') {
            const zip = document.getElementById('zip-search').value;
            alert("Searching DB for: " + zip);
        }
    }

    // ===== WEATHER FETCH =====
    async function fetchWeather() {
      if (!lat || !lon) return;
      const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&hourly=relativehumidity_2m,visibility,pressure_msl,dewpoint_2m&daily=sunrise,sunset&windspeed_unit=mph&temperature_unit=fahrenheit&timezone=auto`;
      
      try {
        const res = await fetch(url);
        const data = await res.json();
        const curr = data.current_weather;
        
        ui.temp.textContent = Math.round(curr.temperature) + "°";
        ui.cond.textContent = getWeatherDesc(curr.weathercode);
        ui.windBig.textContent = Math.round(curr.windspeed);
        
        ui.humid.textContent = data.hourly.relativehumidity_2m[0] + "%";
        ui.dew.textContent = Math.round(data.hourly.dewpoint_2m[0]);
        ui.press.textContent = Math.round(data.hourly.pressure_msl[0]);
        ui.vis.textContent = (data.hourly.visibility[0] / 1609).toFixed(1);
        
        ui.rise.textContent = data.daily.sunrise[0].slice(-5);
        ui.set.textContent = data.daily.sunset[0].slice(-5);

        // Update Effects
        renderIcon(curr.weathercode, curr.is_day);
        
        // Load Radar
        ui.radar.innerHTML = `<iframe src="https://embed.windy.com/embed2.html?lat=${lat}&lon=${lon}&detailLat=${lat}&detailLon=${lon}&width=650&height=450&zoom=10&level=surface&overlay=radar&product=radar&menu=&message=&marker=&calendar=now&pressure=&type=map&location=coordinates&detail=&metricWind=default&metricTemp=default&radarRange=-1" width="100%" height="100%" frameborder="0"></iframe>`;

      } catch(e) { console.error(e); }
    }

    // ===== RENDER GLASS ICON =====
    function renderIcon(code, isDay) {
        const stage = ui.iconStage;
        // Base Cloud
        let html = `<div class="glass-cloud"></div>`;
        
        // Sun/Moon Glare
        if (code < 3) {
            html += `<div class="sun-glare" style="opacity:${isDay?0.8:0.3}; background:${isDay?'radial-gradient(circle, #fbbf24 0%, transparent 70%)':'radial-gradient(circle, #f8fafc 0%, transparent 70%)'}"></div>`;
        }
        
        // Rain
        if (code > 50) {
            for(let i=0; i<5; i++) {
                html += `<div class="rain-drop" style="left:${20 + i*15}px; animation-delay:${i*0.2}s"></div>`;
            }
        }

        // Thunder (Code 95+)
        if (code >= 95) {
            html += `<div class="lightning-bolt bolt-anim"></div>`;
        }

        stage.innerHTML = html;
    }

    function getWeatherDesc(code) {
      if(code === 0) return "Clear Sky";
      if(code < 4) return "Partly Cloudy";
      if(code < 50) return "Foggy";
      if(code < 80) return "Rain";
      return "Thunderstorm";
    }

    function switchTab(id, btn) {
      document.querySelectorAll('.view-section').forEach(e => e.classList.remove('active'));
      document.getElementById('view-'+id).classList.add('active');
      document.querySelectorAll('.nav-item').forEach(e => e.classList.remove('active'));
      btn.classList.add('active');
    }

    initApp();
  </script>
</body>
</html>
